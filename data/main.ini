; Файл конфигурации VisPinger.  

; Можно включать другие файлы с помощью секции Include. 
; Эта секция должна быть одна на файл.
[Include]
File = 	vis_effect.inc		; Включить файл vis_effect.inc
File = 	invalid*file.inc	; Неправильное имя файла. Если файла нет - он пропускается.

; Параметры по умолчанию. 
; Эта секция должна быть одна на файл.
[MAIN]
TTL 	= 2000 		; TimeToLive по умолчанию - время ожидания ответа на ping. Можно переназначить для конкретной секции [IP]
TTLRetry = 3 		; Если на пинг нет ответа - сколько раз повторять
PingInterval = 10000 	; секунд между каждой очередной итерацией пингов (т.е. пауза между проходами всех секций).
Effect 	= EF_Wrk,1,8 	; Постоянный эффект показывающий активность устройства. Задается имя эффекта и список номеров LED

; Соответствие кодов кнопок IRDA
; Эта секция должна быть одна на файл.
; в секции задаются имена и последние 4 символа кода IRDA команды.
[IRDA]
MUTE = 0F3A 		; Встроенная команда отключения звука на 30 мин
RESET = 1234		; Встроенная команда рестарта ESP
SG_OiVei = 9876		; Имя сигнала и соответствующий ему код IRDA

; [IP] - Группа ИП адресов.
; Этих секций может быть много
[IP] ; Blockpost ip's
TTL = 1000 		; TTL пинга. Если не указан - используется из [Main]
TTLRetry = 4 		; Если на пинг нет ответа - сколько раз повторять. Если не указан - используется из [Main]
PingInterval = 6000 	; Интервал между обработками секции. Если не указан - используется из [Main]
Addr = 192.168.1.1      ; Список адресов
Addr = 192.168.1.2	; Можно задавать мнемонические имена. Но нежелательно - уходит больше времени на их разрешение.
Lvl  = LV_KPP,2 	; Имя секции с порогами. далее через ',' список LED куда идет вывод. здесь в 2
			; В секции [IP] может быть несколько порогов LVL
			; если номер LED не указан - отображения не будет.
Fail = EF_Ahtung,2,3 	; Если какой-то адрес не ответил на пинги - выполнить EF_Ahtung и засветить диод 2,3

[IP] ; UnMngblSw1
TTLRetry = 4
PingInterval = 10000
Addr = 192.168.1.10
Addr = 192.168.1.15
Addr = 192.168.10.4
Addr = 192.168.10.5
Lvl  = LV_Typical,3 
Fail = EF_Fail,3

[IP] ; HeadRouter
Addr 	= 192.168.0.1
Lvl	= LV_Typical,4,5
Fail 	= EF_AhtungRouter,4,5

[IP] ; VPN
TTL = 3000 
TTLRetry = 6 
PingInterval = 9000
Addr 	= 192.168.200.1
Lvl	= LV_VPN,6,7
Fail 	= EF_AhtungVPN,6,7

; Секции с описаниями порогов срабатывания начинаются с LV
[LV_KPP]
Mode = MIN 		; Режим вычисления пинга для сравнения
			; MIN - взять минимальное время группы
			; MAX - взять максимальное время группы
			; AVG - взять среднее время группы
Time = 100,EF_Wrk      	; Порог срабатывания в миллисекундах и применяемый эффект
Time = 300,EF_Warn1 	; время в последовательных порогах должно увеличиваться.
Time = 0,EF_Fail	; Если ни один из предыдущих порогов не сработал - выбирается последний.
                        ; Если ответ не получен вообще - будет обрабатываться [IP].Fail  

[LV_Typical]
Mode=AVG 
Time = 200,EF_Wrk 
Time = 400,EF_Warn2 
Time = 0,EF_Fail

[LV_VPN]
Mode=AVG 
Time = 100,EF_Wrk 
Time = 300,EF_Warn1 
Time = 700,EF_Warn2 
Time = 0,EF_Fail

; Секции с описаниями эффектов начинаются с EF
; каждая секция состоит из последовательности Seq = ColorStart,ColorEnd,TransitTime,Delay
; В секции может присутсвовать ссылка на посылаемый сигнал Sig=
[EF_Ahtung]
Seq = 000000,7F0000,300,500 	; из черного плавно перейти в красный и ждать 500мс
Seq = 7F0000,000000,0,500       ; Из красного резко перейти в черный и ждать 500мс. Потом перейти в начало


[EF_Wrk]
Seq = 	000000,007F00,500,0 	; плавно за 0,5 сек black->green
Seq = 	007F00,000000,500,1000  ; плавно за 0,5 сек green->black, ждать 1000 black

[EF_Ok]
Seq = 000000,007F00,500,0 	; плавно за 500 black->green
Seq = 007F00,000000,0,5000 	; резко гаснет и остается темным 5 сек

[EF_Warn1]
Seq = 000000,7F7F00,500,0 	; 500 разгорается из темного в желтый
Seq = 7F7F00,000000,500,0 	; гаснет за 500 и идет в начало

[EF_Warn2]
Seq = 000000,7F7F00,0,500 	; резко желтый и горит 500
Seq = 7F7F00,000000,0,2000 	; резко гаснет и темный 2000

[EF_Fail]
Seq = 000000,7F7F00,500,500
Seq = 7F7F00,7F0000,500,500
Seq = 7F0000,000000,0,500 	; включается темный на 500 и идет в начало
Sig = SG_OiVeiRtr               ; Выполнить сигнал SG_OiVeiRtr

[EF_AhtungRouter]
Seq = 000000,7F0000,0,500 	; включается красный на 500
Seq = 7F0000,000000,0,500 	; включается темный на 500 и идет в начало
Sig = SG_OiVei                  ; Выполнить сигнал SG_OiVei

; Секции с описаниями сигналов начинаются с SG
[SG_OiVei]
PIN = D8 	; Номер ПИН на который подать сигнал (D0,D1,D2,D6,D7,D8)
Level = 1	; Уровень сигнала 0 или 1
Length = 100	; Длительность импульса в мс
Period = 100	; Если сигнал повторяется, игнорировать его в течении Period с момента последнего срабатывания, сек
FileNo = 1 	; Проиграть файл с указанным номером. 
		; Первые 4 знака имени файла на флешке дб цифрами.
		; Например  0001RstSw1.MP3, 0002ChkRtr2.MP3                

[SG_OiVeiRtr]
PIN = D7
Level=1
Length = 100
FileNo = 2 
Period = 100 ; Если сигнал поступает часто, повторяться он будет с периодом 100 сек 
